---
title: "Model Context Protocol (MCP)"
description: "Access Respan data directly from your AI coding assistant using MCP"
---

The Model Context Protocol (MCP) is a standardized framework that enables AI models to interact with external data sources and tools. It allows for real-time access to your Respan logs, traces, prompts, and customer data directly from your coding environment.

## Getting started

Respan provides an MCP server that gives your AI tools direct access to your observability data. The server supports both HTTP streamable (for hosted deployments) and stdio (for local use).

## Installation

<Tabs>
  <Tab title="Public HTTP (Recommended)">
    Connect to Respan's hosted MCP server. The simplest setup - no installation required.

    <Steps>
      <Step title="Get your API key">
        Get your Respan API key from [platform.respan.ai](https://platform.respan.ai/platform/api/api-keys).
      </Step>
      <Step title="Configure your AI tool">
        Add to your MCP configuration file:
        
        <CodeGroup>
        ```json Cursor (~/.cursor/mcp.json)
        {
          "mcpServers": {
            "respan": {
              "url": "https://mcp.respan.ai/api/mcp",
              "headers": {
                "Authorization": "Bearer your_respan_api_key"
              }
            }
          }
        }
        ```

        ```json Claude Desktop (macOS)
        // ~/Library/Application Support/Claude/claude_desktop_config.json
        {
          "mcpServers": {
            "respan": {
              "url": "https://mcp.respan.ai/api/mcp",
              "headers": {
                "Authorization": "Bearer your_respan_api_key"
              }
            }
          }
        }
        ```

        ```json Claude Desktop (Windows)
        // %APPDATA%\Claude\claude_desktop_config.json
        {
          "mcpServers": {
            "respan": {
              "url": "https://mcp.respan.ai/api/mcp",
              "headers": {
                "Authorization": "Bearer your_respan_api_key"
              }
            }
          }
        }
        ```
        </CodeGroup>
      </Step>
      <Step title="Restart your AI tool">
        Restart Cursor or Claude Desktop to load the MCP server.
      </Step>
    </Steps>

    <Tip>
    This is the recommended setup for most users. No installation, no maintenance - just configure and go.
    </Tip>
  </Tab>

  <Tab title="Local Stdio">
    Run the MCP server locally via stdio - for personal development or offline use.

    <Steps>
      <Step title="Prerequisites">
        - [Node.js](https://nodejs.org/) v18 or higher
        - [Git](https://git-scm.com/)
      </Step>
      <Step title="Clone and build the project">
        ```bash
        git clone https://github.com/Respan/respan-mcp.git
        cd respan-mcp
        npm install
        npm run build
        ```
      </Step>
      <Step title="Get your API key">
        Get your Respan API key from [platform.respan.ai](https://platform.respan.ai/platform/api/api-keys).
      </Step>
      <Step title="Configure your AI tool">
        Add to your MCP configuration file. **Important:** Replace the path with your actual installation path.
        
        <CodeGroup>
        ```json Cursor (~/.cursor/mcp.json)
        {
          "mcpServers": {
            "respan": {
              "command": "node",
              "args": ["/Users/yourname/respan-mcp/dist/lib/index.js"],
              "env": {
                "RESPAN_API_KEY": "your_respan_api_key"
              }
            }
          }
        }
        ```

        ```json Claude Desktop (macOS)
        // ~/Library/Application Support/Claude/claude_desktop_config.json
        {
          "mcpServers": {
            "respan": {
              "command": "node",
              "args": ["/Users/yourname/respan-mcp/dist/lib/index.js"],
              "env": {
                "RESPAN_API_KEY": "your_respan_api_key"
              }
            }
          }
        }
        ```

        ```json Claude Desktop (Windows)
        // %APPDATA%\Claude\claude_desktop_config.json
        {
          "mcpServers": {
            "respan": {
              "command": "node",
              "args": ["C:/Users/yourname/respan-mcp/dist/lib/index.js"],
              "env": {
                "RESPAN_API_KEY": "your_respan_api_key"
              }
            }
          }
        }
        ```
        </CodeGroup>
      </Step>
      <Step title="Restart your AI tool">
        Restart Cursor or Claude Desktop to load the MCP server.
      </Step>
    </Steps>

    <Note>
    After updating the code, run `npm run build` again and restart your AI tool.
    </Note>
  </Tab>

  <Tab title="Private HTTP (Teams)">
    Deploy your own instance to Vercel with your API key stored as an environment variable. Perfect for teams - no client-side keys needed.

    <Steps>
      <Step title="Deploy to Vercel">
        Click to deploy with one click:
        
        [![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/Respan/respan-mcp&env=RESPAN_API_KEY&envDescription=Your%20Respan%20API%20key&envLink=https://platform.respan.ai/platform/api/api-keys)
        
        Or deploy manually:
        ```bash
        git clone https://github.com/Respan/respan-mcp.git
        cd respan-mcp
        vercel deploy --prod
        ```
      </Step>
      <Step title="Set environment variable">
        In Vercel Dashboard → Your Project → Settings → Environment Variables:
        - Add `RESPAN_API_KEY` = `your_respan_api_key`
        - Redeploy for changes to take effect
      </Step>
      <Step title="Configure your AI tool">
        Share this config with your team (replace with your Vercel URL):
        
        ```json
        {
          "mcpServers": {
            "respan": {
              "url": "https://your-project.vercel.app/mcp"
            }
          }
        }
        ```
      </Step>
    </Steps>

    <Tip>
    This mode is ideal for teams - deploy once, and everyone can use the same URL without exposing API keys in their local config.
    </Tip>
  </Tab>
</Tabs>

---

## Authentication

| Mode | API Key Location | Best For |
|------|------------------|----------|
| **Public HTTP** | `Authorization` header | Individual users, quick setup |
| **Local Stdio** | `RESPAN_API_KEY` env var | Personal development, offline use |
| **Private HTTP** | Vercel environment variable | Teams, shared access |

Get your Respan API key from [platform.respan.ai](https://platform.respan.ai/platform/api/api-keys).

---

## Enterprise configuration

For enterprise users with a custom API endpoint (e.g., `endpoint.respan.ai`), you can override the default API base URL.

<Tabs>
  <Tab title="HTTP Mode">
    Add the `respan-api-base-url` header:
    
    ```json
    {
      "mcpServers": {
        "respan": {
          "url": "https://mcp.respan.ai/api/mcp",
          "headers": {
            "Authorization": "Bearer your_respan_api_key",
            "respan-api-base-url": "https://endpoint.respan.ai/api"
          }
        }
      }
    }
    ```
  </Tab>
  <Tab title="Stdio Mode">
    Add the `RESPAN_API_BASE_URL` environment variable:
    
    ```json
    {
      "mcpServers": {
        "respan": {
          "command": "node",
          "args": ["/path/to/respan-mcp/dist/lib/index.js"],
          "env": {
            "RESPAN_API_KEY": "your_respan_api_key",
            "RESPAN_API_BASE_URL": "https://endpoint.respan.ai/api"
          }
        }
      }
    }
    ```
  </Tab>
</Tabs>

**Supported endpoints:**
| Endpoint | URL |
|----------|-----|
| Default (Cloud) | `https://api.respan.ai/api` |
| Enterprise | `https://endpoint.respan.ai/api` |
| Local development | `http://localhost:8000/api` |

---

## Available tools

Once connected, your AI tools have access to the following Respan features.

### Logs

| Tool | Description |
|------|-------------|
| `list_logs` | List and filter LLM request logs with powerful query capabilities |
| `get_log_detail` | Retrieve complete details of a single log by unique ID |

**Example queries:**
- "Show me the most expensive requests from the last hour"
- "Find all failed requests for customer user_123"
- "List logs where latency > 5 seconds"

### Traces

| Tool | Description |
|------|-------------|
| `list_traces` | List and filter traces with sorting and pagination |
| `get_trace_tree` | Retrieve complete hierarchical span tree of a trace |

**Example queries:**
- "Show me traces with errors in production"
- "Get the span tree for trace xyz123"
- "Find traces that cost more than $0.10"

### Customers

| Tool | Description |
|------|-------------|
| `list_customers` | List customers with pagination and sorting |
| `get_customer_detail` | Get customer details including budget usage |

**Example queries:**
- "Who are my top 10 customers by cost?"
- "Show customer budget usage for user_abc"
- "List customers sorted by number of requests"

### Prompts

| Tool | Description |
|------|-------------|
| `list_prompts` | List all prompts in your organization |
| `get_prompt_detail` | Get detailed prompt information |
| `list_prompt_versions` | List all versions of a prompt |
| `get_prompt_version_detail` | Get specific version details |

**Example queries:**
- "Show me all my prompts"
- "Get the latest version of my customer-support prompt"
- "What are the different versions of prompt xyz?"

---

## Troubleshooting

<AccordionGroup>
  <Accordion title="MCP server not showing in Cursor/Claude Desktop">
    1. Verify your config file path is correct
    2. Check JSON syntax (use a JSON validator)
    3. Restart your AI tool completely (not just reload)
    4. For stdio mode: ensure `npm run build` completed successfully
  </Accordion>
  <Accordion title="Authentication errors">
    1. Verify your API key is correct
    2. For HTTP mode: ensure header is `Authorization: Bearer YOUR_KEY` (not just the key)
    3. For stdio mode: check the `RESPAN_API_KEY` env var is set correctly
  </Accordion>
  <Accordion title="Connection timeout or errors">
    1. Check your internet connection
    2. For enterprise: verify `RESPAN_API_BASE_URL` is correct
    3. For private HTTP: ensure Vercel deployment is active
  </Accordion>
</AccordionGroup>

---

## Source code

The Respan MCP server is open source:

<Card title="GitHub Repository" icon="github" href="https://github.com/Respan/respan-mcp">
  View source code, report issues, and contribute
</Card>
